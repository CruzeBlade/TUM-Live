<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>TUM Live | Edit Units</title>
        {{ template "headImports" }}
        <script>
            window.HELP_IMPROVE_VIDEOJS = false;
        </script>
        <link rel="stylesheet" href="/static/node_modules/video.js/dist/video-js.min.css" />
        <link rel="stylesheet" href="/static/node_modules/nouislider/distribute/nouislider.min.css" />
    <script src="/static/assets/ts-dist/admin.bundle.js?v={{.IndexData.VersionTag}}"></script>
    </head>
    <body class="bg-primary">
        {{- /*gotype: github.com/joschahenningsen/TUM-Live/web.LectureUnitsPageData*/ -}}
        {{ template "header" .IndexData.TUMLiveContext }}


        <div class="container mx-auto text-white">
            <div class="min-w-screen flex items-center justify-center">
                <div class="w-full lg:w-5/6">
                    <p class="text-gray-300">Reference video:</p>
                    <video-js
                        id="my-video"
                        class="video-js w-full"
                        controls
                        muted
                        preload="auto"
                        data-setup='{"fluid": true}'
                    >
                        <source
                            src="{{ if .Lecture.PlaylistUrl }}
                                {{ .Lecture.PlaylistUrl }}
                            {{ else if .Lecture.PlaylistUrlPRES }}
                                {{ .Lecture.PlaylistUrlPRES }}
                            {{ else }}
                                {{ .Lecture.PlaylistUrlCAM }}
                            {{ end }}"
                            type="application/x-mpegURL"
                        />
                        <p class="vjs-no-js">To view this video please enable JavaScript.</p>
                    </video-js>
                    <div class="mt-4">
                        <h2>Units:</h2>
                        <ul>
                            {{ range $unit := .Units }}
                                <li class="hover:bg-secondary">
                                    <div class="flex w-full">
                                        <div class="w-full font-semibold text-gray-300">
                                            {{ $unit.UnitName }}
                                        </div>
                                        <div>
                                            <i
                                                class="fas fa-trash cursor-pointer text-gray-300 hover:text-purple-500"
                                                onclick="admin.deleteUnit({{ $unit.Model.ID }})"
                                            ></i>
                                        </div>
                                    </div>
                                    <div class="text-sm text-gray-300">
                                        {{ $unit.GetDescriptionHTML }}
                                    </div>
                                </li>
                            {{ end }}
                        </ul>
                        <button class="rounded bg-info px-4 py-2" onclick="admin.toggleNewUnitForm(this)">
                            New Unit
                        </button>
                        <form
                            id="unitNew"
                            class="hidden border-t-2 border-gray-300"
                            onkeydown="return event.key !== 'Enter';"
                            onsubmit="return admin.submitNewUnit({{ .Lecture.Model.ID }})"
                        >
                            <label>
                                <span>Unit Title. Keep it short (Perhaps one word and a number)</span>
                                <input id="newUnitTitle" type="text" placeholder="Introduction" />
                            </label>
                            <label>
                                Unit description
                                <textarea id="newUnitDescription" placeholder="You can use Markdown."></textarea>
                            </label>
                            <div id="sliderNew" class="mt-4"></div>
                            <input
                                type="submit"
                                value="Save Unit"
                                class="m-4 border-0 bg-secondary text-gray-300 hover:text-white"
                            />
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script src="/static/node_modules/video.js/dist/video.min.js"></script>
    <script src="/static/node_modules/@videojs/http-streaming/dist/videojs-http-streaming.min.js"></script>
    <script src="/static/node_modules/videojs-contrib-quality-levels/dist/videojs-contrib-quality-levels.min.js"></script>
    <script src="/static/node_modules/videojs-hls-quality-selector/dist/videojs-hls-quality-selector.min.js"></script>
</html>
